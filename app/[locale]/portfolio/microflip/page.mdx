import Link from 'next/link'
import { getDictionary } from '../../../i18n/getDictionary'
import PCBViewer from '../../../components/PCBViewer'

export async function generateMetadata({ params }) {
  return {
    title: 'MicroFlip',
    description: 'Ultra-compact polarity-reverser board for N20-size brushed DC gear-motors.'
  }
}

export default async function Page({ params }) {
  const locale = params?.locale || 'en'
  const t = await getDictionary(locale)

  return (
    <article className="max-w-4xl">
      <p className="mb-4">
        <Link href={`/${locale}/portfolio`} className="nav-link">
          ← {t.common.backToPortfolio}
        </Link>
      </p>
      
      <h1 className="text-4xl md:text-5xl font-bold text-neutral-900 dark:text-white mb-4">
        MicroFlip
      </h1>
      
      <p className="text-xl text-neutral-600 dark:text-neutral-300 mb-8">
        Ultra-compact polarity-reverser board for N20-size brushed DC gear-motors.
      </p>

      {/*3D PCB Viewer */}
      <div className="mb-8">
        <PCBViewer stepFile="/models/microflip.glb" />
      </div>

      <div className="prose prose-neutral dark:prose-invert max-w-none">
        <h2>Overview</h2>
        <p>MicroFlip is a thumb-sized breakout that lets you drive a 3 to 12 V N20 gear-motor in either direction with a single slide. A rugged DPDT switch wired in an H-pattern swaps both motor leads, while an on-board RC snubber suppresses brush noise and protects contacts from arcing. Drop MicroFlip between your motor and your motherboard, and enjoy instant bidirectional control—no microcontroller, no firmware, just flip to drive, flip back to rewind.</p>

        <h2>Design Philosophy</h2>
        <p>Simplicity and reliability define this design. By using a high-quality DPDT switch instead of active electronics, we created a fail-safe, zero-maintenance solution that requires no programming and works under all conditions. The integrated RC snubber protects both switch contacts and motor from the destructive arcing that occurs during switching.</p>

        <h2>Key Features</h2>
        <ul>
          <li><strong>True DPDT Reversal:</strong> Slide switch swaps both motor leads for reliable forward and reverse operation</li>
          <li><strong>Compact Footprint:</strong> Fits inside most micro-robot and lock-actuator housings</li>
          <li><strong>High Current:</strong> Up to 1 A stall current with minimal resistive losses</li>
          <li><strong>Integrated RC Snubber:</strong> 0.1 µF X7R + 120 ohm half-watt series network mounted at motor pins</li>
          <li><strong>Flexible I/O:</strong> Large, castellated pads accept 22 to 26 AWG silicone leads or 2-pin JST-PH connectors</li>
          <li><strong>No Firmware:</strong> Purely hardware solution with no programming required</li>
        </ul>

        <h2>Technical Implementation</h2>
        <h3>Switching Mechanism</h3>
        <p>The DPDT (Double Pole Double Throw) switch is wired in an H-pattern configuration:</p>
        <ul>
          <li><strong>Forward Position:</strong> Motor leads connected in one polarity</li>
          <li><strong>Reverse Position:</strong> Motor leads connected in opposite polarity</li>
          <li><strong>Neutral Position:</strong> Motor disconnected (center-off)</li>
        </ul>

        <h3>RC Snubber Network</h3>
        <p>The RC snubber protects the switch from destructive arcing:</p>
        <ul>
          <li><strong>Capacitor:</strong> 0.1 µF X7R ceramic capacitor absorbs voltage spikes</li>
          <li><strong>Resistor:</strong> 120 ohm half-watt resistor limits discharge current</li>
          <li><strong>Placement:</strong> Mounted directly at motor pins for maximum effectiveness</li>
        </ul>

        <h2>Performance Specifications</h2>
        <ul>
          <li><strong>Motor Type:</strong> N20-size brushed DC gear-motors</li>
          <li><strong>Voltage Range:</strong> 3 V to 12 V nominal</li>
          <li><strong>Current Rating:</strong> 1 A peak (stall)</li>
          <li><strong>Switch Type:</strong> DPDT slide switch</li>
          <li><strong>PCB Layers:</strong> 2-layer, 1 oz copper, HASL-RoHS</li>
          <li><strong>Dimensions:</strong> Ultra-compact thumb-sized footprint</li>
          <li><strong>Connector Type:</strong> Large castellated pads or JST-PH</li>
          <li><strong>Wire Gauge:</strong> Supports 22 to 26 AWG silicone leads</li>
        </ul>

        <h2>Applications</h2>
        <p>MicroFlip is ideal for:</p>
        <ul>
          <li><strong>Micro-Robots:</strong> Small-scale robotics requiring bidirectional motor control</li>
          <li><strong>Lock-Actuators:</strong> Linear actuators needing direction control</li>
          <li><strong>Rapid Prototyping:</strong> Quick motor direction testing without programming</li>
          <li><strong>Educational:</strong> Learning about motor control and polarity reversal</li>
          <li><strong>Hobby Projects:</strong> Custom RC vehicles and mechanical systems</li>
        </ul>

        <h2>Hardware Files</h2>
        <ul>
          <li><strong>hardware/:</strong> EasyEDA schematic (JSON), PCB layout (JSON), and Gerber ZIP</li>
          <li><strong>docs/:</strong> 3D board renders, schematic PDF, datasheets</li>
          <li><strong>production/:</strong> Pick-and-place CSV, interactive BOM HTML</li>
        </ul>

        <h2>Mounting Guidelines</h2>
        <ol>
          <li>Ensure proper voltage range (3 V to 12 V)</li>
          <li>Connect motor to castellated pads or JST-PH connector</li>
          <li>Mount switch in accessible location for easy operation</li>
          <li>Test both forward and reverse positions before final assembly</li>
        </ol>

        <h2>Safety Notes</h2>
        <ul>
          <li><strong>Current Limits:</strong> For higher currents, use MOSFET H-bridge instead</li>
          <li><strong>Wire Gauge:</strong> Use AWG-22 (or larger) for optimal current handling</li>
          <li><strong>Heat Management:</strong> Monitor switch temperature at high currents</li>
          <li><strong>Short Circuit:</strong> Ensure proper insulation to prevent accidental shorts</li>
        </ul>

        <h2>Testing & Validation</h2>
        <ul>
          <li><strong>Switch Testing:</strong> Verified DPDT operation in all positions</li>
          <li><strong>Current Testing:</strong> Measured 1 A stall current without voltage drop</li>
          <li><strong>Snubber Testing:</strong> Verified arcing suppression at switching</li>
          <li><strong>Thermal Testing:</strong> Switch temperature under continuous operation</li>
          <li><strong>Connector Testing:</strong> Verified castellated pad and JST-PH connections</li>
        </ul>

        <h2>Future Roadmap</h2>
        <ul>
          <li>Higher current versions (2 A, 5 A)</li>
          <li>Integrated current sensing</li>
          <li>LED status indicators</li>
          <li>Multiple motor control variants</li>
        </ul>

        <p>This project demonstrates how simple, well-designed hardware can provide robust motor control without the complexity of microcontrollers or active components.</p>
      </div>
    </article>
  )
}
